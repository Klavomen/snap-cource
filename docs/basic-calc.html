<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Calculation of Optical Images Data: SNAP Course</title>
    <meta name="description" content="SNAP course for specialists" />
    <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />
    <meta property="og:title" content="SNAP course for specialists" />
    <meta property="og:type" content="book" />
    <meta property="og:description" content="SNAP course for specialists" />
    <meta name="github-repo" content="klavomen/snap-course" /> 
  <meta name="author" content="M. Shiryaev, E. Epiphanova, D. Nikolayev, D. Kornilov on base of A. Karpachevskiy's site" />
  <meta name="date" content="2020-12-07" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon.png" />
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
  <link rel="next" href="map-topo.html"/>
  <script src="libs/jquery-2.2.3/jquery.min.js"></script>
  <link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />
  <script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
  <link rel="stylesheet" href="style.css" type="text/css" />
  </head>

<body>
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">
    <div class="book-summary">
      <nav role="navigation">
        <ul class="summary">
          <li><a href="./">SNAP Course</a></li>
          <li class="divider"></li>
          <li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Software for course completion</a>
            <ul>
              <li class="chapter" data-level="" data-path="index.html"><a href="index.html#snap"><i class="fa fa-check"></i>SNAP</a></li>
            </ul>
          </li>
          <li class="chapter" data-level="1" data-path="snap-introduction.html"><a href="snap-introduction.html"><i class="fa fa-check"></i><b>1</b> Basic abilities and data sources</a>
            <ul>
              <li class="chapter" data-level="1.1" data-path="snap-introduction.html"><a href="snap-introduction.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
              <li class="chapter" data-level="1.2" data-path="snap-introduction.html"><a href="snap-introduction.html#interface"><i class="fa fa-check"></i><b>1.2</b> SNAP Interface</a></li>
              <li class="chapter" data-level="1.3" data-path="snap-introduction.html"><a href="snap-introduction.html#data-sources"><i class="fa fa-check"></i><b>1.3</b> Data Sources and Downloading Images</a></li>
              <li class="chapter" data-level="1.4" data-path="snap-introduction.html"><a href="snap-introduction.html#data-import"><i class="fa fa-check"></i><b>1.4</b> Data import</a></li>
              <li class="chapter" data-level="1.5" data-path="snap-introduction.html"><a href="snap-introduction.html#raster-cropping"><i class="fa fa-check"></i><b>1.5</b> Raster cropping</a></li>
              <li class="chapter" data-level="1.6" data-path="snap-introduction.html"><a href="snap-introduction.html#data-visualization"><i class="fa fa-check"></i><b>1.6</b> Data visualization</a></li>
              <li class="chapter" data-level="1.7" data-path="snap-introduction.html"><a href="snap-introduction.html#data-export"><i class="fa fa-check"></i><b>1.7</b> Images Export</a></li>
            </ul>
          </li>
          <li class="chapter" data-level="2" data-path="basic-calc.html"><a href="basic-calc.html"><i class="fa fa-check"></i><b>2</b> Calculation of Optical Images Data</a>
            <ul>
              <li class="chapter" data-level="2.1" data-path="basic-calc.html"><a href="basic-calc.html#masking"><i class="fa fa-check"></i><b>2.1</b> Sea and land masking</a></li>
              <li class="chapter" data-level="2.2" data-path="basic-calc.html"><a href="basic-calc.html#tools-calc"><i class="fa fa-check"></i><b>2.2</b> Raster Calculations by SNAP Tools</a></li>
              <li class="chapter" data-level="2.3" data-path="basic-calc.html"><a href="basic-calc.html#raster-calc"><i class="fa fa-check"></i><b>2.3</b> Raster Calculator</a></li>
              <li class="chapter" data-level="2.4" data-path="basic-calc.html"><a href="basic-calc.html#analysis-tool"><i class="fa fa-check"></i><b>2.4</b> Analysis Tools</a></li>
              <li class="chapter" data-level="2.5" data-path="basic-calc.html"><a href="basic-calc.html#thematic-proc"><i class="fa fa-check"></i><b>2.5</b> Thematic Processors</a></li>
            </ul>
          </li>
          <li class="chapter" data-level="3" data-path="multitemporal.html"><a href="multitemporal.html"><i class="fa fa-check"></i><b>3</b> Multitemporal Synthesis and Image clustering</a>
            <!-- <ul>
              <li class="chapter" data-level="2.1" data-path="basic-calc.html"><a href="basic-calc.html#masking"><i class="fa fa-check"></i><b>2.1</b> Sea and land masking</a></li>
              <li class="chapter" data-level="2.2" data-path="basic-calc.html"><a href="basic-calc.html#tools-calc"><i class="fa fa-check"></i><b>2.2</b> Raster Calculations by SNAP Tools</a></li>
              <li class="chapter" data-level="2.3" data-path="basic-calc.html"><a href="basic-calc.html#raster-calc"><i class="fa fa-check"></i><b>2.3</b> Raster Calculator</a></li>
              <li class="chapter" data-level="2.4" data-path="basic-calc.html"><a href="basic-calc.html#analysis-tool"><i class="fa fa-check"></i><b>2.4</b> Analysis Tools</a></li>
              <li class="chapter" data-level="2.5" data-path="basic-calc.html"><a href="basic-calc.html#thematic-proc"><i class="fa fa-check"></i><b>2.5</b> Thematic Processors</a></li>
            </ul> -->
          </li>
          <li class="chapter" data-level="4" data-path="sup-class.html"><a href="sup-class.html"><i class="fa fa-check"></i><b>4</b> Supervised Classification</a>
            <ul>
              <li class="chapter" data-level="4.1" data-path="sup-class.html"><a href="sup-class.html#explan"><i class="fa fa-check"></i><b>4.1</b> Data selection </a></li>
              <li class="chapter" data-level="4.2" data-path="sup-class.html"><a href="sup-class.html#poly-creat"><i class="fa fa-check"></i><b>4.2</b> Polygons creating and editing</a></li>
              <li class="chapter" data-level="4.3" data-path="sup-class.html"><a href="sup-class.html#vector-import"><i class="fa fa-check"></i><b>4.3</b> Import and export of vector data</a></li>
              <li class="chapter" data-level="4.4" data-path="sup-class.html"><a href="sup-class.html#classification"><i class="fa fa-check"></i><b>4.4</b> Classification of imagery</a></li>
              <li class="chapter" data-level="4.5" data-path="sup-class.html"><a href="sup-class.html#accuracy"><i class="fa fa-check"></i><b>4.5</b> Accuracy estimation</a></li>
            </ul>
          </li>
          <li class="chapter" data-level="5" data-path="radar.html"><a href="radar.html"><i class="fa fa-check"></i><b>5</b> SAR Processing</a>
            <ul>
              <li class="chapter" data-level="5.1" data-path="radar.html"><a href="radar.html#sources"><i class="fa fa-check"></i><b>5.1</b> Sources of radar data</a></li>
              <li class="chapter" data-level="5.2" data-path="radar.html"><a href="radar.html#pre-process"><i class="fa fa-check"></i><b>5.2</b> SAR Image pre-processing</a></li>
              <li class="chapter" data-level="5.3" data-path="radar.html"><a href="radar.html#graph-and-batch"><i class="fa fa-check"></i><b>5.3</b> Graph and Batch processing in SNAP Desktop</a></li>
              <li class="chapter" data-level="5.4" data-path="radar.html"><a href="radar.html#segmentation"><i class="fa fa-check"></i><b>5.4</b> Segmentation of flooded areas</a></li>
              <li class="chapter" data-level="5.5" data-path="radar.html"><a href="radar.html#image-geocoding"><i class="fa fa-check"></i><b>5.5</b> Geocoding of SAR images</a></li>
            </ul>
          </li>
          <li class="divider"></li>
          <li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
        </ul>
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">SNAP course for specialists</a>
          </h1>
        </div>
        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">
            <section class="normal" id="section-">
            <div id="basic-calc" class="section level1">
              <h1><span class="header-section-number">Class 2</span> Calculation of Optical Images Data</h1>
              <p>Class objectives:
                <ol>
                  <li>Sea and Land masking of Raster Data</li>
                  <li>Raster Calculations by SNAP Tools and by your own formulas</li>
                  <li>Exploring basic analysis tools and Thematic Processors</li>
                </ol>
              </p>
              <p>This lesson focuses on basic skills for working with optical images. Once you have learnt what SNAP is, what it is for and how to load and open optical images, you need to learn how to perform basic operations with them. First of all, you may need pixel masking, basic index calculation, basic analysis tools, image calculator and thematic processors.</p>
              <div id="masking" class="section level2">
                <h2><span class="header-section-number">2.1.</span> Sea and Land Masking</h2>
                <p><a href="basic-calc.html#basic-calc">Back to the beginning ⇡</a></p>
                <p>In this part, we will familiarise ourselves with the elements for masking. Work with masks is carried out through a special window: “Mask manager”. You can open this window through <i>View -> Tool Windows -> Mask Manager</i>.</p>
                <div>
                  <img src="images/Ref02/MaskManager.png" alt="" />
                  <p class="caption">Mask Manager Window</p>
                </div>
                <p>In this window you can interact with the image masks. You can customise the visibility of masks by ticking the checkbox in the column <img src="images/Ref02/visibilityColumn.png" alt=""> You can also customise the mask layer name, colour, transparency and description.</p>
                <p>If you have one mask layer selected, the following options are available <img src="images/Ref02/SingleMaskOptions.png" alt="">These tools allow you to: copy, edit, remove, transfer the selected mask to other products, import, export, zooms to selected masks. If you have multiple layers selected, you can't copy and paste, but you can use the geoprocessing tools <img src="images/Ref02/MultipleMaskOptions.png" alt="">These are the tools that make it possible: creates the union, intersections, the difference (top and down) and complement.</p>
                <p>You can create your own mask by selecting a polygon with the digitising tool <img src="images/Ref02/NewVectorMask.png" alt="">.</p>
                <p>Also you can create a mask built over the range of the band <img src="images/Ref02/RangeMaskButton.png" alt="">. The minimum and maximum value of the range is specified here. The brightnesses in the range will be sampled and a mask matching this condition will be created. Raster could be masked by logical mathematical expression <img src="images/Ref02/ExpressionMaskButton.png" alt="">.</p>
                <div>
                  <img src="images/Ref02/RangeMaskInterface.png" alt="" width="300px"/>
                  <p class="caption">Range Mask Creation Window</p>
                </div>
                <p>If the imported dataset has not preprocessed land or water masks, SNAP can compute them by integrated tool <i>Land/sea mask</i>. In Processing Parameters choose bands, which will take part in mask computing.</p>
                <div>
                  <img src="images/Ref02/LandSeaMaskInterfaca.png" alt="" width="400px"/>
                  <p class="caption">Land/Sea Mask Window</p>
                </div>
                <div>
                  <img src="images/Ref02/WaterMaskResult.png" alt="" width="400px"/>
                  <p class="caption">Result of Land/Sea Mask Tool</p>
                </div>

                <p>You can calculate statistics by mask, using the tool <i>Compute mask area</i></p>
              </div>
              <div id="tools-calc" class="section level2">
                <h2><span class="header-section-number">2.2.</span> Raster Calculations by SNAP Tools</h2>
                <p><a href="basic-calc.html#basic-calc">Back to the beginning ⇡</a></p>
                <p>A frequently used tool in this work is the use and construction of index images. Index images can be part of analyses of various phenomena expressed on the Earth's surface. There are a large number of such indices that engage different spectral channels of images.</p>
                <p>The indices are located in the tab “optical”, in thematic land processing and thematic sea processing. Consider the vegetation radiometric indices. For example, the second tab has the familiar NDVI vegetation index. To apply the NDVI formula you simply select the red and near infrared channel of the shot in the menu.</p>
                <div>
                  <img src="images/Ref02/NDVI.png" alt="" width="300px"/>
                  <p class="caption">NDVI Tool Window</p>
                </div>
                <p>As a result, we get the NDVI image relatively quickly and easily. Using the “Colour manipulation” window we can adjust the colour representation of the image, assigning convenient colours and a range of values.</p>
                <div>
                  <img src="images/Ref02/NDVIResult.png" alt=""/>
                  <p class="caption">Result of NDVI Tool: the greenest areas have more vegetation</p>
                </div>
                <p>Another example of SNAP Tools is MSAVI index (Modified Soil Adjusted Vegetation Index), which is calculating by the following formula \(\frac{2 NIR + 1 - \sqrt{(2 NIR + 1)^2 - 8 (NIR - RED)}}{2}\)</p>
                <p>Pre-prepared formulas are convenient for quick reusability, as well as in multi-step processes built in graph builder (it will be described in the next lessons).</p>
              </div>
              <div id="raster-calc" class="section level2">
                <h2><span class="header-section-number">2.3.</span> Raster Calculations by SNAP Tools</h2>
                <p><a href="basic-calc.html#basic-calc">Back to the beginning ⇡</a></p>
                <p>In certain cases, existing indices are not sufficient. There are cases when you need to count non-index images, for example for masking or other operations. The Raster Calculator allows you to perform mathematical operations with image pixels on individual bands. In the SNAP software, this functionality is performed in the Band maths function. You can call this up via the Raster tab.</p>
                <p>In the main menu you can set general parameters, to write a degeneration you need to go to the expression editing window by clicking on the button. In this window, select the product to which the formula is applied, the data source (i.e., the image channel), and the list of operations (functions, constants, and operators). On the right side you need to enter your expression. It is possible to save and load expressions, so that you don't have to re-enter them, especially if they are frequently used.</p>
                <div>
                  <img src="images/Ref02/RasterCalcInterface.png" alt=""/>
                  <p class="caption">Band Maths Tool and Expression Editor</p>
                </div>
                <p>The example above shows the Coloration Index formula \(\frac{RED - BLUE}{RED}\), which is not in the standard toolboxes. Therefore, you must enter the formula yourself. If you plan to use the formula several times, or in ModelBuilder, you can save this formula via the save button. To reuse it, you need to click load and find the location of the file with the formula. The formula is saved with the extension *.txt.</p>
              </div>
              <div id="analysis-tool" class="section level2">
                <h2><span class="header-section-number">2.4.</span> Analysis Tools</h2>
                <p><a href="basic-calc.html#basic-calc">Back to the beginning ⇡</a></p>
                <p>Basic analytics tools can be useful for deep analysis of satellite imagery, determining decoding features and defining classification algorithm. The analysis tab has the following items:</p>
                <ol>
                  <li>
                    <p><b>Information</b>. The ‘information’ tool outputs various information about the image, which is taken from metadata files</p>
                    <div>
                      <img src="images/Ref02/InformationW.png" alt="" width="400px"/>
                      <p class="caption">Information Window</p>
                    </div>
                  </li>
                  <li>
                    <p><b>Statistics.</b> This tool outputs statistical information about the raster. Basic statistical parameters are calculated as well as graphs</p>
                    <div>
                      <img src="images/Ref02/StatisticsW.png" alt="" />
                      <p class="caption">Statistics Window</p>
                    </div>
                  </li>
                  <li>
                    <p><b>Scatter plot.</b> This tool allows you to plot a graph between the values of two images. The graph can help to identify patterns or relationships between different images.</p>
                    <div>
                      <img src="images/Ref02/ScatterW.png" alt="" />
                      <p class="caption">Scatter Plot Window</p>
                    </div>
                  </li>
                  <li>
                    <p><b>Profile plot.</b> Having created a line, you can plot the brightness of the pixels along which the line passes. You can select a channel and see the differences along the path.</p>
                    <div>
                      <img src="images/Ref02/ProfileW.png" alt="" />
                      <p class="caption">Profile Plot Window</p>
                    </div>
                  </li>
                  <li>
                    <p><b>Geo-Coding.</b> Displays the geometric properties of the image</p>
                    <div>
                      <img src="images/Ref02/GeocodingW.png" alt="" width="400px"/>
                      <p class="caption">Geo-Coding Window</p>
                    </div>
                  </li>
                  <li>
                    <p><b>Histogram. </b>The tool creates a histogram of the distribution of the number of pixels by brightness values.</p>
                    <div>
                      <img src="images/Ref02/HistogramW.png" alt="" />
                      <p class="caption">Histogram Window</p>
                    </div>
                  </li>
                </ol>
              </div>
              <div id="thematic-proc" class="section level2">
                <h2><span class="header-section-number">2.5.</span> Thematic Processors</h2>
                <p><a href="basic-calc.html#basic-calc">Back to the beginning ⇡</a></p>
                <p>SNAP software contains toolboxes with special processes such as biophysical, soil, water and others. Using biophysical processes and Landsat data as examples, LAI, FAPAR, FVC can be calculated.</p>
                <div>
                  <img src="images/Ref02/BiophysProc.png" alt="" width="400px"/>
                  <p class="caption">biophysical Processor for LandSat 8 Tool</p>
                </div>
                <ul>
                  <li><b>LAI</b> (Leaf Area Index) is a biophysical indicator that characterises the total amount of leaf area of vegetation per unit of land area. It is expressed as the ratio of the total leaf area (in square metres) to the land area (in square metres) on which the leaves are located. LAI is needed for ecosystem monitoring, agriculture, water management, environmental studies. The LAI calculation is based on NDVI and EVI using empirical coefficients.</li>
                  <li><b>FAPAR</b> (Fraction of Absorbed Photosynthetically Active Radiation) is a biophysical index that characterises the fraction of photosynthetically active radiation (FAR, range 400-700 nm) absorbed by vegetation for photosynthesis. This index is important for assessing plant productivity and its role in the global carbon cycle. FAPAR indicates how efficiently vegetation absorbs the solar energy needed for photosynthesis.</li>
                  <li><b>FVC</b> (Fractional Vegetation Cover) is a biophysical index that characterises the proportion of land surface area covered by green vegetation within a given area. It is expressed as a fraction (0 to 1) or as a percentage (0% to 100%). FVC estimates the extent of vegetation cover, ignoring areas occupied by soil, water or other objects. This index is used for agriculture, vegetation monitoring, and natural resource management.</li>
                </ul>
              </div>
              <div id="thematic-proc" class="section level2">
                <h3>Tasks & Questions</h3>
                <p>Questions:
                  <ul>
                    <li>What methods of masking do you know?</li>
                    <li>What baseline analysis tools are you aware of and what do they do?</li>
                    <li>Which group of thematic processes does LAI belong to, what is their essence?</li>
                  </ul>
                  Tasks:
                  Add a new formula to create an index image through expressions and save the tool.
                  Create a mask for the index image by discarding pixels with smaller or larger values on the threshold.
                  Create another mask on another tool, find the intersection and export as a vector file.
                </p>
              </div>
              <table>
                <tbody>
                <tr class="odd">
                <td><em>Shiryaev M. et. al</em> <strong>SNAP Course for Specialists</strong>. 
                  Moscow: Department of Geography, MSU, 2024.</td>
                </tr>
                </tbody>
              </table>

            </div>
          </div>
          </section>
        </div>
      </div>
    </div>
    <a href="snap-introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
    <a href="map-math.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
  </div>
</div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["cartography-course.pdf", "cartography-course.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
