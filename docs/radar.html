<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Calculation of Optical Images Data: SNAP Course</title>
    <meta name="description" content="SNAP course for specialists" />
    <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />
    <meta property="og:title" content="SNAP course for specialists" />
    <meta property="og:type" content="book" />
    <meta property="og:description" content="SNAP course for specialists" />
    <meta name="github-repo" content="klavomen/snap-course" /> 
  <meta name="author" content="M. Shiryaev, E. Epiphanova, D. Nikolayev, D. Kornilov on base of A. Karpachevskiy's site" />
  <meta name="date" content="2020-12-07" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/SNAP_icon-400x400.jpg" />
    <link rel="shortcut icon" href="images/SNAP_icon-400x400.jpg" type="image/x-icon" />
    <link rel="next" href="map-topo.html"/>
  <script src="libs/jquery-2.2.3/jquery.min.js"></script>
  <link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
  <link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />
  <script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
  <link rel="stylesheet" href="style.css" type="text/css" />
  </head>

<body>
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">
    <div class="book-summary">
      <nav role="navigation">
        <ul class="summary">
          <li><a href="./">SNAP Course</a></li>
          <li class="divider"></li>
          <li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Software for course completion</a>
            <ul>
              <li class="chapter" data-level="" data-path="index.html"><a href="index.html#snap"><i class="fa fa-check"></i>SNAP</a></li>
            </ul>
          </li>
          <li class="chapter" data-level="1" data-path="snap-introduction.html"><a href="snap-introduction.html"><i class="fa fa-check"></i><b>1</b> Basic abilities and data sources</a>
            <ul>
              <li class="chapter" data-level="1.1" data-path="snap-introduction.html"><a href="snap-introduction.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
              <li class="chapter" data-level="1.2" data-path="snap-introduction.html"><a href="snap-introduction.html#interface"><i class="fa fa-check"></i><b>1.2</b> SNAP Interface</a></li>
              <li class="chapter" data-level="1.3" data-path="snap-introduction.html"><a href="snap-introduction.html#data-sources"><i class="fa fa-check"></i><b>1.3</b> Data Sources and Downloading Images</a></li>
              <li class="chapter" data-level="1.4" data-path="snap-introduction.html"><a href="snap-introduction.html#data-import"><i class="fa fa-check"></i><b>1.4</b> Data import</a></li>
              <li class="chapter" data-level="1.5" data-path="snap-introduction.html"><a href="snap-introduction.html#raster-cropping"><i class="fa fa-check"></i><b>1.5</b> Raster cropping</a></li>
              <li class="chapter" data-level="1.6" data-path="snap-introduction.html"><a href="snap-introduction.html#data-visualization"><i class="fa fa-check"></i><b>1.6</b> Data visualization</a></li>
              <li class="chapter" data-level="1.7" data-path="snap-introduction.html"><a href="snap-introduction.html#data-export"><i class="fa fa-check"></i><b>1.7</b> Images Export</a></li>
            </ul>
          </li>
          <li class="chapter" data-level="2" data-path="basic-calc.html"><a href="basic-calc.html"><i class="fa fa-check"></i><b>2</b> Calculation of Optical Images Data</a>
            <ul>
              <li class="chapter" data-level="2.1" data-path="basic-calc.html"><a href="basic-calc.html#masking"><i class="fa fa-check"></i><b>2.1</b> Sea and land masking</a></li>
              <li class="chapter" data-level="2.2" data-path="basic-calc.html"><a href="basic-calc.html#tools-calc"><i class="fa fa-check"></i><b>2.2</b> Raster Calculations by SNAP Tools</a></li>
              <li class="chapter" data-level="2.3" data-path="basic-calc.html"><a href="basic-calc.html#raster-calc"><i class="fa fa-check"></i><b>2.3</b> Raster Calculator</a></li>
              <li class="chapter" data-level="2.4" data-path="basic-calc.html"><a href="basic-calc.html#analysis-tool"><i class="fa fa-check"></i><b>2.4</b> Analysis Tools</a></li>
              <li class="chapter" data-level="2.5" data-path="basic-calc.html"><a href="basic-calc.html#thematic-proc"><i class="fa fa-check"></i><b>2.5</b> Thematic Processors</a></li>
            </ul>
          </li>
          <li class="chapter" data-level="3" data-path="multitemporal.html"><a href="multitemporal.html"><i class="fa fa-check"></i><b>3</b> Multitemporal Synthesis and Image clustering</a>
            <ul>
              <li class="chapter" data-level="3.1" data-path="multitemporal.html"><a href="multitemporal.html#multitemp-images"><i class="fa fa-check"></i><b>3.1</b> Downloading Multitemporal Images</a></li>
              <!-- <li class="chapter" data-level="2.2" data-path="basic-calc.html"><a href="basic-calc.html#tools-calc"><i class="fa fa-check"></i><b>2.2</b> Raster Calculations by SNAP Tools</a></li> -->
              <!-- <li class="chapter" data-level="2.3" data-path="basic-calc.html"><a href="basic-calc.html#raster-calc"><i class="fa fa-check"></i><b>2.3</b> Raster Calculator</a></li> -->
              <!-- <li class="chapter" data-level="2.4" data-path="basic-calc.html"><a href="basic-calc.html#analysis-tool"><i class="fa fa-check"></i><b>2.4</b> Analysis Tools</a></li> -->
              <!-- <li class="chapter" data-level="2.5" data-path="basic-calc.html"><a href="basic-calc.html#thematic-proc"><i class="fa fa-check"></i><b>2.5</b> Thematic Processors</a></li> -->
            </ul>
          </li>
          <li class="chapter" data-level="4" data-path="sup-class.html"><a href="sup-class.html"><i class="fa fa-check"></i><b>4</b> Supervised Classification</a>
            <ul>
              <li class="chapter" data-level="4.1" data-path="sup-class.html"><a href="sup-class.html#explan"><i class="fa fa-check"></i><b>4.1</b> Data selection </a></li>
              <li class="chapter" data-level="4.2" data-path="sup-class.html"><a href="sup-class.html#poly-creat"><i class="fa fa-check"></i><b>4.2</b> Polygons creating and editing</a></li>
              <li class="chapter" data-level="4.3" data-path="sup-class.html"><a href="sup-class.html#vector-import"><i class="fa fa-check"></i><b>4.3</b> Import and export of vector data</a></li>
              <li class="chapter" data-level="4.4" data-path="sup-class.html"><a href="sup-class.html#classification"><i class="fa fa-check"></i><b>4.4</b> Classification of imagery</a></li>
              <li class="chapter" data-level="4.5" data-path="sup-class.html"><a href="sup-class.html#accuracy"><i class="fa fa-check"></i><b>4.5</b> Accuracy estimation</a></li>
            </ul>
          </li>
          <li class="chapter" data-level="5" data-path="radar.html"><a href="radar.html"><i class="fa fa-check"></i><b>5</b> SAR Processing</a>
            <ul>
                <li class="chapter" data-level="5.1" data-path="radar.html"><a href="radar.html#sources"><i class="fa fa-check"></i><b>5.1</b> Sources of radar data</a></li>
                <li class="chapter" data-level="5.2" data-path="radar.html"><a href="radar.html#pre-process"><i class="fa fa-check"></i><b>5.2</b> SAR Image pre-processing</a></li>
                <li class="chapter" data-level="5.3" data-path="radar.html"><a href="radar.html#graph-and-batch"><i class="fa fa-check"></i><b>5.3</b> Graph and Batch processing in SNAP Desktop</a></li>
                <li class="chapter" data-level="5.4" data-path="radar.html"><a href="radar.html#segmentation"><i class="fa fa-check"></i><b>5.4</b> Segmentation of flooded areas</a></li>
                <li class="chapter" data-level="5.5" data-path="radar.html"><a href="radar.html#image-geocoding"><i class="fa fa-check"></i><b>5.5</b> Geocoding of SAR images</a></li>
            </ul>
          </li>
          <li class="divider"></li>
          <li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
        </ul>
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">SNAP course for specialists</a>
          </h1>
        </div>
        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">
            <section class="normal" id="section-">
            <div id="basic-calc" class="section level1">
                <h1><span class="header-section-number">Class 5</span> SAR Data Processing</h1>
                <p>Radar data is an unusual type of data for physical geographers. Despite this, they can be useful for a number of tasks. This is due to the advantage of radar imagery to penetrate through clouds and the ability to survey at night, unlike optical imagery. SNAP is one of the few free software capable of processing radar data. Moreover, SNAP integrates many tools that are sharpened specifically for processing Sentinel-1 open data, making it easier.</p>
                <p>In this tutorial, you will learn about radar data sources, radar image preprocessing steps, and an example radar data application.</p>
                <div id="sources" class="section level2">
                    <h2><span class="header-section-number">5.1.</span> Sources of radar data</h2>
                    <p><a href="sup-class.html">Back to the beginning ⇡</a></p>
                    <p>The Sentinel-1 program, curated by the European Space Agency, is the only active constellation with open data. The main resource containing Sentinel-1 images is the <a href="https://dataspace.copernicus.eu/">Copernicus Data Space Ecosystem</a>. However, in this task we will use an alternative resource — <a href="https://search.asf.alaska.edu/#/">Alaska Satellite Facility</a>.</p>
                    <p>Within the framework of the assignment we will estimate the area covered by flooding in the city of Orenburg and its vicinity in April 2024. This will require a summer image of the area as well as during the flood. Unfortunately, images for this area are available up to and including 2021, as the data for this area was supplied by Sentinel-1B satellite, which broke down in December 2021, but Sentinel-1A was imaging the flood as part of the International Charter on Space and Major Disasters (more details can be found in open sources).</p>
                    <p>To download the imagery to ASF:
                        <ul>
                            <li>Draw an extent of the area of interest (Orenburg city)</li>
                            <li>In Filters section select time range (2021-2024). Additionally, you can use the Seasonal Search option to select the desired months (June-August 2021, April 2024).</li>
                            <li>In the File Type section, you should select the dual polarization amplitude data (GRD-HD). SLC data is used for interferometric and polarimetric processing and will also be fine, but for the purposes of our task it will suffice</li>
                            <li>In the Path and Frame Filters section you can select the desired Path and Frame of the image. We will need an April flood image that has Path = 86 and Frame = 165. A summer shot might have Path = 35 and Frame = 420.</li>
                        </ul>
                    </p>
                    <div>
                        <img src="images/Ref05/AlaskaFilter.png" alt="" />
                        <p class="caption">Alaska Satellite Facility: Search Filters</p>
                    </div>
                    <p>The selected pictures will appear in the downloads. If you have difficulties, you can use the links to download them:
                        <ul>
                            <li><a href="https://datapool.asf.alaska.edu/GRD_HD/SB/S1B_IW_GRDH_1SDV_20210627T023213_20210627T023238_027536_03497B_703D.zip">June 2021: link</a></li>
                            <li><a href="https://datapool.asf.alaska.edu/GRD_HD/SA/S1A_IW_GRDH_1SDV_20240409T140745_20240409T140814_053358_06786F_D7C4.zip">April 2024: link 2</a></li>
                        </ul>
                    </p>
                </div>
                <div id="pre-process" class="section level2">
                    <h2><span class="header-section-number">5.2.</span> SAR Image pre-processing</h2>
                    <p><a href="sup-class.html">Back to the beginning ⇡</a></p>
                    <p>Open images in SNAP and display one of polarizations of any image in the window. Note that the image is not oriented relative to the sides of light - it is recorded in the coordinate system of the radar imagery. To correlate objects on the image, you can use the World View tool, which will display the image extents. Also, geographic coordinates of the point where the cursor is placed are shown in the lower right part of the window. Find the city of Orenburg on the image (it will be the brightest in the central part of the image), and then the flooded areas (dark areas) next to it. Remember the pixel numbers in the corners of the area of interest (flooded areas) - we will need them when cropping the image.</p>
                    <p>Before working with radar data, the following steps are necessary:
                        <ol>
                            <li><p>Raster Subset. Select any area that includes the flooded area so that the number of pixels in the X and Y axes is approximately 5000-6000 (to speed up processing). Enter X coordinates of the leftmost and rightmost pixels, topmost and bottommost pixels in the coordinate input fields, or use the floating window. After cropping the first image, open the second image as well and find the area you cropped, then perform the same procedure with the second image.</p>
                                <div>
                                    <img src="images/Ref05/RadarSubset.png" alt="" />
                                    <p class="caption">Example of Raster Subset Parameters</p>
                                </div>
                                <p>Cropped pictures are stored in RAM. Examine the cropped slices and their extents in World View again and make sure you have taken the same area, then the slices can be saved to memory.</p>
                                <p>After cropping the images, you can open all the channels of the slice. Open the RGB composite (click on the image in Product Explorer - Open RGB Image Window) and display the suggested channel combination in the window. Note which data is located in which channels. Then in the window try to identify different objects on the image.</p>
                                <div>
                                    <img src="images/Ref05/RadarSynth.png" alt="" />
                                    <p class="caption">Example of Raster Synthesis in VV-VH-VV/VH</p>
                                </div>
                                <p>Further work with only one of these two images. All tools for working with radar images are located in the Radar section</p>
                            </li>
                            <li>Apply Orbit File (Radar - Apply Orbit File). This procedure is necessary to make the image georeferencing more accurate. Try not to skip this step. If an error occurs when loading the orbit file, restart the program. if you have not installed the latest version of the application, then install the latest one;</li>
                            <li>Remove Thermal Noise (Radar - Radiometic - S1 Thermal Noise Removal). This procedure removes radio noise so that the image is clearer. Leave all settings at their defaults and make sure the Remove Thermal Noise checkbox is active;</li>
                            <li>Radiometric Calibration (Radar - Radiometic - Calibrate). As a result you should only get Radar cross section data (sigma0 band), the other checkboxes should be deactivated. Also make sure that both input and output channels are fed in both polarizations. ;</li>
                            <li>Speckle noise filtering (Radar - Speckle Filtering - Single Product Speckle Filter). This procedure is aimed at removing speckle noise - random intensity increases that occur when overlaying a radar signal. Various filters are implemented in the tool, and you can also adjust the floating window size and filter strength. Try using different parameters, compare the results and choose the most successful one</li>
                            <li>Conversion from dimensionless units to decibels (Raster - Data Convertion - Linear From/To dB). A new channel with amplitude values in decibels will be created in the file.</li>
                        </ol>
                    </p>
                    <p>Pre-processing of the radar image is completed</p>
                </div>
                <div id="graph-and-batch" class="section level2">
                    <h2><span class="header-section-number">5.3.</span> Graph and Batch processing</h2>
                    <p><a href="sup-class.html">Back to the beginning ⇡</a></p>
                    <p>Image pre-processing is a standard procedure for conventional processing of amplitude radar image data. In addition, the sequential realization of the processes leaves unnecessary files. Therefore, to speed up the processing, SNAP has a graph processing option. Graph creation is available in the GraphBuilder tool (Processing menu). This allows you to automate processing and to avoid saving intermediate results.</p>
                    <p>When opened, only file read and write tools are added. Editing a graph in GraphBuilder is done as follows:
                        <ul>
                            <li>Nodes with tools are added by PCM from the corresponding sections. Add the tools used as part of the pre-processing (without Subset)</li>
                            <li>Sequentially connect all tools with arrows and check if the order of the processes is correct</li>
                            <li>Select the source file in the Read section (second snapshot) and the directory where the file will be saved in the Write section, and correctly set all parameters for each tool. Start the processing</li>
                            <li>Save the compiled processing graph so that you can use it in the future. The graph will be saved in XML format. In addition, other available graphs can be viewed in the application directory</li>
                        </ul>
                    </p>
                    <div>
                        <img src="images/Ref05/BuiltGraph.png" alt="" />
                        <p class="caption">Built Graph</p>
                    </div>
                    <p>The Batch Processing tool is also available in the Processing menu. With this tool it is possible to do stream processing of a set of images according to the created graph.</p>
                </div>
                <div id="segmentation" class="section level2">
                    <h2><span class="header-section-number">5.4.</span> SAR Image pre-processing</h2>
                    <p><a href="sup-class.html">Back to the beginning ⇡</a></p>
                    <p>After these manipulations two images can be merged into one multitemporal image. Radar images can be combined by orbit parameters (Radar - Coregistration - Stack Tools - Create Stack). In this case it is necessary that Initial Offset Method should be based on orbit data.</p>
                    <div>
                        <img src="images/Ref05/StackInterface.png" alt="" />
                        <p class="caption">Stack Interface</p>
                    </div>
                    <p>As a result of merging two images, one of them will become the master image and the other will become the slave image. Display a multi-channel image in the window, where the red channel will contain the image before the flood, the green channel will contain the image after the flood, and the blue channel will contain the image after the flood. As a result, the resulting image will show flooded areas in dark red color.</p>
                    <div>
                        <img src="images/Ref05/StackResult.png" alt="" />
                        <p class="caption">Stack Result</p>
                    </div>
                    <p>Search the brightness values in decibels, and then mask the flooded areas by segmenting the values from the two channels. Add the resulting mask (it will appear in the masks section) to a new channel via the raster calculator.</p>
                    <div>
                        <img src="images/Ref05/Brightness.png" alt="" />
                    </div>
                </div>
                <div id="image-geocoding" class="section level2">
                    <h2><span class="header-section-number">5.5.</span> Geocoding of SAR images</h2>
                    <p><a href="sup-class.html">Back to the beginning ⇡</a></p>
                    <p>In order to georeference radar images from the survey system projection to the map system projection, it is necessary to perform geocoding procedure. In the process of geocoding the reference DEM is also used, which is necessary to eliminate geometric distortions. It is recommended to perform this operation always in the last turn, because as a result of this operation images have artifacts.</p>
                    <div>
                        <img src="images/Ref05/Geocoded.png" alt="" />
                    </div>
                </div>
              <table>
                <tbody>
                <tr class="odd">
                <td><em>Shiryaev M. et. al</em> <strong>SNAP Course for Specialists</strong>. 
                  Moscow: Department of Geography, MSU, 2024.</td>
                </tr>
                </tbody>
              </table>

            </div>
          </div>
          </section>
        </div>
      </div>
    </div>
    <a href="sup-class.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
  </div>
</div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["cartography-course.pdf", "cartography-course.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
